(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["answers"],{"881b":function(e,t,s){"use strict";s.r(t);var n=s("7a23");const i={key:0,class:"h-24"},r={class:"inline-flex flex-col"},a=["value","onChange"];function o(e,t,s,o,c,l){var d,b;return Object(n["x"])(),Object(n["h"])(n["a"],null,[null!==(d=e.questions)&&void 0!==d&&d.length&&null!==(b=e.parties)&&void 0!==b&&b.length?(Object(n["x"])(),Object(n["h"])("div",i,[Object(n["i"])("div",null,Object(n["H"])(e.questions[e.index].title),1),(Object(n["x"])(!0),Object(n["h"])(n["a"],null,Object(n["D"])(e.parties,t=>{var s;return Object(n["x"])(),Object(n["h"])("span",{key:t.id},[Object(n["i"])("span",r,[Object(n["k"])(Object(n["H"])(t.abbreviation)+" ",1),Object(n["i"])("input",{type:"number",max:"5",min:"1",class:"w-16",value:null===(s=e.answers.find(s=>s.QuestionId===e.currentQuestion.id&&s.PartyId===t.id))||void 0===s?void 0:s.agreeLevel,onChange:s=>e.changeAgreeLevel(t.id,s.target.value)},null,40,a)])])}),128))])):Object(n["g"])("",!0),Object(n["i"])("a",{href:"#",onClick:t[0]||(t[0]=Object(n["L"])(t=>e.index--,["prevent"]))}," Předchozí "),Object(n["i"])("a",{href:"#",onClick:t[1]||(t[1]=Object(n["L"])((...t)=>e.sendAnswers&&e.sendAnswers(...t),["prevent"]))}," Odeslat "),Object(n["i"])("a",{href:"#",onClick:t[2]||(t[2]=Object(n["L"])(t=>e.index++,["prevent"]))}," Další ")],64)}s("14d9");var c=s("79f6"),l=Object(n["m"])({name:"Answers",data:function(){return{index:0,parties:[],questions:[],answers:[],newAnswers:[],modifiedAnswers:[]}},computed:{currentQuestion(){return this.questions[this.index]}},async created(){this.parties=await Object(c["a"])({url:"parties"}),this.questions=await Object(c["a"])({url:"questions"}),this.answers=await Object(c["a"])({url:"answers"})},methods:{changeAgreeLevel(e,t){const s=this.currentQuestion,n=this.answers.find(t=>t.QuestionId===s.id&&t.PartyId===e),i=this.newAnswers.findIndex(t=>t.QuestionId===s.id&&t.PartyId===e);-1!==i&&this.newAnswers.splice(i,1);const r=this.modifiedAnswers.findIndex(t=>t.QuestionId===s.id&&t.PartyId===e);if(-1!==r&&this.modifiedAnswers.splice(r,1),t){const i={PartyId:e,QuestionId:s.id,agreeLevel:parseInt(t)};console.log("existing:",!!n,"answer:",i),n?this.modifiedAnswers.push(i):this.newAnswers.push(i)}},async sendAnswers(){console.log("sending these:",this.newAnswers),Object(c["b"])({url:"answers",body:this.newAnswers}),this.modifiedAnswers.forEach(e=>{Object(c["b"])({url:`answers/${e.QuestionId}/${e.PartyId}`,body:e,method:"PUT"})}),this.newAnswers=[],this.modifiedAnswers=[],this.answers=await Object(c["a"])({url:"answers"})}}}),d=s("6b0d"),b=s.n(d);const u=b()(l,[["render",o]]);t["default"]=u},f37e:function(e,t,s){"use strict";s.r(t);var n=s("7a23");const i={key:0,class:"grid gap-6 py-4"},r={class:"pb-2 flex flex-row items-center"},a={class:"h-4 w-4 mr-2 text-gray-500 font-semibold leading-3 select-none"},o=Object(n["i"])("path",{"fill-rule":"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1),c=[o],l={class:"text-left font-medium sm:w-2/3"},d={class:"grid grid-cols-6 gap-1"},b=Object(n["i"])("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"},null,-1),u=[b],h={key:0,class:"sm:hidden inline-block mb-1 font-bold text-gray-500 text-md transform -translate-y-1"},O={class:"text-xs md:text-sm hidden sm:inline-block"},j={class:"flex flex-shrink-0 flex-wrap justify-center"},w={key:0,class:"party-name transition-all opacity-0 group-hover:opacity-90 hidden group-hover:inline-block overflow-visible absolute bg-white rounded"},p={class:""};function v(e,t,o,b,v,f){var g,x;const m=Object(n["F"])("loading");return null!==(g=e.questions)&&void 0!==g&&g.length&&null!==(x=e.parties)&&void 0!==x&&x.length?(Object(n["x"])(),Object(n["h"])("div",i,[(Object(n["x"])(!0),Object(n["h"])(n["a"],null,Object(n["D"])(e.questions,t=>(Object(n["x"])(),Object(n["h"])("div",{key:t.id},[Object(n["i"])("span",r,[Object(n["i"])("span",a,[["top","bottom","left","right"].includes(t.position)?(Object(n["x"])(),Object(n["h"])("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",class:Object(n["s"])(["transform",{"rotate-90":"left"===t.position,"-rotate-90":"right"===t.position,"rotate-180":"top"===t.position}]),viewBox:"0 0 20 20",fill:"currentColor"},c,2)):(Object(n["x"])(),Object(n["h"])(n["a"],{key:1},[Object(n["k"])(Object(n["H"])("center"===t.position?"●":t.position[0]),1)],64))]),Object(n["i"])("h3",l,Object(n["H"])(t.title),1)]),Object(n["i"])("div",d,[(Object(n["x"])(!0),Object(n["h"])(n["a"],null,Object(n["D"])(e.reverseOrder,(i,r)=>(Object(n["x"])(),Object(n["h"])("div",{key:i,class:Object(n["s"])(["border-2 rounded-md py-2",0===r||1===r?"border-green-300":2===r?"border-yellow-300":3===r||4===r?"border-red-300":"border-gray-300"])},[(Object(n["x"])(),Object(n["h"])("svg",{class:Object(n["s"])(["inline-block sm:hidden h-5 w-5 mb-2",0===r?"text-green-500 transform rotate-0":1===r?"text-green-500 transform rotate-45":2===r?"text-yellow-500 transform rotate-90":3===r?"text-red-500 transform rotate-135":4===r?"text-red-500 transform rotate-180":"hidden"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},u,2)),5===r?(Object(n["x"])(),Object(n["h"])("span",h," ? ")):Object(n["g"])("",!0),Object(n["i"])("span",O,Object(n["H"])(0===r?"Souhlasí":1===r?"Spíše souhlasí":2===r?"Neutrální":3===r?"Spíše nesouhlasí":4===r?"Nesouhlasí":"Neví/neodpověděli"),1),Object(n["i"])("div",j,[(Object(n["x"])(!0),Object(n["h"])(n["a"],null,Object(n["D"])(e.parties,r=>{var a,o;return Object(n["x"])(),Object(n["h"])(n["a"],{key:r.id},[i==(null===(a=r.Answers.find(e=>e.Question.id===t.id))||void 0===a?void 0:a.agreeLevel)||!i&&0==(null===(o=r.Answers.find(e=>e.Question.id===t.id))||void 0===o?void 0:o.agreeLevel)?(Object(n["x"])(),Object(n["h"])("span",{key:0,class:Object(n["s"])(["h-10 w-10 block transform scale-90 opacity-70 group",{"border-2 rounded-md bg-white bg-contain transition-all duration-150 hover:z-10 hover:duration-300 hover:scale-150 hover:opacity-100":!r.isUser}]),style:Object(n["t"])({backgroundImage:r.isUser?`url(${e.locationMarker})`:`url(${s("b553")(`./${r.id}.png`)})`})},[r.isUser?Object(n["g"])("",!0):(Object(n["x"])(),Object(n["h"])("span",w,[Object(n["i"])("span",p,Object(n["H"])(r.name),1)]))],6)):Object(n["g"])("",!0)],64)}),128))])],2))),128))])]))),128))])):(Object(n["x"])(),Object(n["f"])(m,{key:1}))}var f=s("3a5e"),g=s("79f6"),x=s("0b73"),m=s.n(x),y=Object(n["m"])({name:"Answers",components:{Loading:f["a"]},data:function(){return{parties:[],questions:[],reverseOrder:[5,4,3,2,1,void 0],locationMarker:m.a}},computed:{},async created(){this.questions=await Object(g["a"])({url:"questions"}),this.parties=[...this.$store.state.parties,{Answers:this.$store.state.answers,isUser:!0}],console.log("parties with user",this.parties)},methods:{}}),k=s("6b0d"),A=s.n(k);const I=A()(y,[["render",v]]);t["default"]=I}}]);
//# sourceMappingURL=answers.8a2b7051.js.map